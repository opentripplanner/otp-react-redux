{"version":3,"sources":["error-message.js"],"names":["ErrorMessage","props","error","errorMessages","currentQuery","message","msg","msgConfig","find","m","id","modes","mode","includes","Component","PropTypes","object","mapStateToProps","state","ownProps","activeSearch","otp","response","config","mapDispatchToProps","dispatch"],"mappings":";;;;;;;;;;;;;;;;;;;AAAA;;AACA;;AACA;;AACA;;AAEA;;;;;;;;;;;;;;;;;;;;;;;;;;IAEMA,Y;;;;;;;;;;;;;6BAKM;AAAA,wBACuC,KAAKC,KAD5C;AAAA,UACAC,KADA,eACAA,KADA;AAAA,UACOC,aADP,eACOA,aADP;AAAA,UACsBC,YADtB,eACsBA,YADtB;AAER,UAAI,CAACF,KAAL,EAAY,OAAO,IAAP;AAEZ,UAAIG,OAAO,GAAGH,KAAK,CAACI,GAApB,CAJQ,CAKR;;AACA,UAAIH,aAAJ,EAAmB;AACjB,YAAMI,SAAS,GAAGJ,aAAa,CAACK,IAAd,CAAmB,UAAAC,CAAC;AAAA,iBAAIA,CAAC,CAACC,EAAF,KAASR,KAAK,CAACQ,EAAnB;AAAA,SAApB,CAAlB;;AACA,YAAIH,SAAJ,EAAe;AACb,cAAIA,SAAS,CAACI,KAAd,EAAqB;AAAA;AAAA;AAAA;;AAAA;AACnB,mCAAmBJ,SAAS,CAACI,KAA7B,8HAAoC;AAAA,oBAAzBC,IAAyB;;AAClC,oBAAIR,YAAY,CAACQ,IAAb,CAAkBC,QAAlB,CAA2BD,IAA3B,CAAJ,EAAsC;AACpCP,kBAAAA,OAAO,GAAGE,SAAS,CAACD,GAApB;AACA;AACD;AACF;AANkB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAOpB,WAPD,MAOOD,OAAO,GAAGE,SAAS,CAACD,GAApB;AACR;AACF;;AAED,aACE;AAAK,QAAA,SAAS,EAAC;AAAf,SACE;AAAK,QAAA,SAAS,EAAC;AAAf,SACE;AAAG,QAAA,SAAS,EAAC;AAAb,QADF,yBADF,EAIE;AAAK,QAAA,SAAS,EAAC;AAAf,SAA0BD,OAA1B,CAJF,EAKE,6BAAC,kBAAD;AAAW,QAAA,WAAW,EAAE,CAAC,YAAD,EAAe,cAAf;AAAxB,QALF,CADF;AASD;;;;EAlCwBS,gB,GAqC3B;;;gBArCMd,Y,eACe;AACjBE,EAAAA,KAAK,EAAEa,mBAAUC;AADA,C;;AAsCrB,IAAMC,eAAe,GAAG,SAAlBA,eAAkB,CAACC,KAAD,EAAQC,QAAR,EAAqB;AAC3C,MAAMC,YAAY,GAAG,4BAAgBF,KAAK,CAACG,GAAtB,CAArB;AACA,SAAO;AACLnB,IAAAA,KAAK,EAAEkB,YAAY,IAAIA,YAAY,CAACE,QAA7B,IAAyCF,YAAY,CAACE,QAAb,CAAsBpB,KADjE;AAELE,IAAAA,YAAY,EAAEc,KAAK,CAACG,GAAN,CAAUjB,YAFnB;AAGLD,IAAAA,aAAa,EAAEe,KAAK,CAACG,GAAN,CAAUE,MAAV,CAAiBpB;AAH3B,GAAP;AAKD,CAPD;;AASA,IAAMqB,kBAAkB,GAAG,SAArBA,kBAAqB,CAACC,QAAD,EAAWN,QAAX,EAAwB;AACjD,SAAO,EAAP;AACD,CAFD;;eAIe,yBAAQF,eAAR,EAAyBO,kBAAzB,EAA6CxB,YAA7C,C","sourcesContent":["import React, { Component } from 'react'\nimport PropTypes from 'prop-types'\nimport { connect } from 'react-redux'\nimport TripTools from '../narrative/trip-tools'\n\nimport { getActiveSearch } from '../../util/state'\n\nclass ErrorMessage extends Component {\n  static propTypes = {\n    error: PropTypes.object\n  }\n\n  render () {\n    const { error, errorMessages, currentQuery } = this.props\n    if (!error) return null\n\n    let message = error.msg\n    // check for configuration-defined message override\n    if (errorMessages) {\n      const msgConfig = errorMessages.find(m => m.id === error.id)\n      if (msgConfig) {\n        if (msgConfig.modes) {\n          for (const mode of msgConfig.modes) {\n            if (currentQuery.mode.includes(mode)) {\n              message = msgConfig.msg\n              break\n            }\n          }\n        } else message = msgConfig.msg\n      }\n    }\n\n    return (\n      <div className='error-message'>\n        <div className='header'>\n          <i className='fa fa-exclamation-circle' /> Could Not Plan Trip\n        </div>\n        <div className='message'>{message}</div>\n        <TripTools buttonTypes={['START_OVER', 'REPORT_ISSUE']} />\n      </div>\n    )\n  }\n}\n\n// connect to the redux store\n\nconst mapStateToProps = (state, ownProps) => {\n  const activeSearch = getActiveSearch(state.otp)\n  return {\n    error: activeSearch && activeSearch.response && activeSearch.response.error,\n    currentQuery: state.otp.currentQuery,\n    errorMessages: state.otp.config.errorMessages\n  }\n}\n\nconst mapDispatchToProps = (dispatch, ownProps) => {\n  return {}\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(ErrorMessage)\n"]}