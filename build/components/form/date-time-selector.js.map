{"version":3,"sources":["date-time-selector.js"],"names":["DateTimeSelector","props","evt","setQueryParam","date","target","value","weekday","format","OTP_API_DATE_FORMAT","endTime","startTime","time","timeFormat","OTP_API_TIME_FORMAT","dateFormat","type","departArrive","state","dateFocused","checkInput","input","document","createElement","setAttribute","_supportsDateTimeInputs","marginBottom","map","i","_setDepartArrive","marginTop","_onBackupTimeChange","_onBackupDateChange","_onTimeChange","width","display","_onDateChange","Component","PropTypes","string","location","object","label","profile","bool","func","DateOptionButton","setDepartArrive","active","text","classNames","push","join","_onClick","mapStateToProps","ownProps","otp","currentQuery","config","mapDispatchToProps"],"mappings":"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","sourcesContent":["// import moment from 'moment'\nimport React, {Component} from 'react'\nimport PropTypes from 'prop-types'\nimport { Form, FormGroup, FormControl, Row, Col, Button } from 'react-bootstrap'\n// import { SingleDatePicker } from 'react-dates'\nimport { connect } from 'react-redux'\nimport moment from 'moment'\n\nimport { setQueryParam } from '../../actions/form'\nimport {\n  OTP_API_DATE_FORMAT,\n  OTP_API_TIME_FORMAT,\n  getTimeFormat,\n  getDateFormat\n} from '../../util/time'\n\nclass DateTimeSelector extends Component {\n  static propTypes = {\n    date: PropTypes.string,\n    departArrive: PropTypes.string,\n    time: PropTypes.string,\n    location: PropTypes.object,\n    label: PropTypes.string,\n    profile: PropTypes.bool,\n    startTime: PropTypes.string,\n    endTime: PropTypes.string,\n\n    setQueryParam: PropTypes.func,\n    type: PropTypes.string // replace with locationType?\n  }\n\n  constructor (props) {\n    super(props)\n    this.state = {\n      dateFocused: false\n    }\n  }\n\n  _onDateChange = (evt) => {\n    this.props.setQueryParam({ date: evt.target.value })\n  }\n\n  _onDayOfWeekChange = evt => {\n    this.props.setQueryParam({\n      date: moment().weekday(evt.target.value).format(OTP_API_DATE_FORMAT)\n    })\n  }\n\n  _onEndTimeChange = (evt) => {\n    this.props.setQueryParam({ endTime: evt.target.value })\n  }\n\n  _onStartTimeChange = (evt) => {\n    this.props.setQueryParam({ startTime: evt.target.value })\n  }\n\n  _onTimeChange = (evt) => {\n    this.props.setQueryParam({ time: evt.target.value })\n  }\n\n  _onBackupTimeChange = (evt) => {\n    const {setQueryParam, timeFormat} = this.props\n    const time = moment(evt.target.value, timeFormat).format(OTP_API_TIME_FORMAT)\n    setQueryParam({ time })\n  }\n\n  _onBackupDateChange = (evt) => {\n    const {setQueryParam, dateFormat} = this.props\n    const date = moment(evt.target.value, dateFormat).format(OTP_API_DATE_FORMAT)\n    setQueryParam({ date })\n  }\n\n  _setDepartArrive = (type) => {\n    const {setQueryParam} = this.props\n    setQueryParam({ departArrive: type })\n    if (type === 'NOW') {\n      setQueryParam({\n        date: moment().format(OTP_API_DATE_FORMAT),\n        time: moment().format(OTP_API_TIME_FORMAT)\n      })\n    }\n  }\n\n  componentWillMount () {\n    const checkInput = (type) => {\n      var input = document.createElement('input')\n      input.setAttribute('type', type)\n      return input.type === type\n    }\n    this._supportsDateTimeInputs = checkInput('date') && checkInput('time')\n  }\n\n  render () {\n    const { departArrive, date, time, timeFormat, dateFormat } = this.props\n\n    // TODO: restore for profile mode\n    /* if (this.props.profile) {\n      const dowOptions = [{\n        text: 'WEEKDAY',\n        weekday: 3\n      }, {\n        text: 'SATURDAY',\n        weekday: 6\n      }, {\n        text: 'SUNDAY',\n        weekday: 0\n      }]\n\n      return (\n        <Form>\n          <FormGroup style={{marginBottom: '15px'}} className='date-time-selector'>\n            <Row>\n              <Col xs={12}>\n                <FormControl\n                  className='dropdown-selector'\n                  componentClass='select'\n                  style={{width: '100%'}}\n                  onChange={this._onDayOfWeekChange}\n                >\n                  {dowOptions.map((o, i) => (\n                    <option key={i} value={o.weekday}>{o.text}</option>\n                  ))}\n                </FormControl>\n              </Col>\n            </Row>\n            <Row style={{ marginTop: 20 }}>\n              <Col xs={5}>\n                <FormControl\n                  className='time-selector'\n                  type='time'\n                  required='true'\n                  value={startTime}\n                  style={{width: '100%'}}\n                  onChange={this._onStartTimeChange}\n                />\n              </Col>\n              <Col xs={2}>TO</Col>\n              <Col xs={5}>\n                <FormControl\n                  className='time-selector'\n                  type='time'\n                  required='true'\n                  value={endTime}\n                  style={{width: '100%'}}\n                  onChange={this._onEndTimeChange}\n                />\n              </Col>\n            </Row>\n          </FormGroup>\n        </Form>\n      )\n    } */\n\n    return (\n      <Form>\n        <FormGroup style={{marginBottom: '15px'}} className='date-time-selector'>\n          <Row>\n            {['NOW', 'DEPART', 'ARRIVE'].map((type, i) => (\n              <Col key={i} xs={4}>\n                <DateOptionButton\n                  type={type}\n                  active={departArrive === type}\n                  setDepartArrive={this._setDepartArrive}\n                />\n              </Col>\n            ))}\n          </Row>\n          {departArrive !== 'NOW' && !this._supportsDateTimeInputs && (\n            <Row style={{ marginTop: 20 }}>\n              <Col xs={6}>\n                <FormControl\n                  className='time-selector'\n                  type='text'\n                  defaultValue={moment(time, OTP_API_TIME_FORMAT).format(timeFormat)}\n                  required='true'\n                  onChange={this._onBackupTimeChange}\n                />\n              </Col>\n              <Col xs={6}>\n                <FormControl\n                  className='date-selector'\n                  type='text'\n                  defaultValue={moment(date, OTP_API_DATE_FORMAT).format(dateFormat)}\n                  required='true'\n                  onChange={this._onBackupDateChange}\n                />\n              </Col>\n            </Row>\n          )}\n          {departArrive !== 'NOW' && this._supportsDateTimeInputs && (\n            <Row style={{ marginTop: 20 }}>\n              <Col xs={6}>\n                <FormControl\n                  className='time-selector'\n                  type='time'\n                  value={time}\n                  required='true'\n                  onChange={this._onTimeChange}\n                  style={{width: '100%', display: departArrive === 'NOW' && 'none'}}\n                />\n              </Col>\n              <Col xs={6}>\n                <FormControl\n                  className='date-selector'\n                  type='date'\n                  value={date}\n                  required='true'\n                  onChange={this._onDateChange}\n                  style={{width: '100%', display: departArrive === 'NOW' && 'none'}}\n                />\n              </Col>\n            </Row>\n          )}\n        </FormGroup>\n      </Form>\n    )\n  }\n}\n\nclass DateOptionButton extends Component {\n  _onClick = () => {\n    this.props.setDepartArrive(this.props.type)\n  }\n\n  render () {\n    const { active, type } = this.props\n    let text = type\n    if (type === 'NOW') text = 'Leave now'\n    if (type === 'DEPART') text = 'Depart at'\n    if (type === 'ARRIVE') text = 'Arrive by'\n    const classNames = ['date-option-button', 'select-button']\n    if (active) classNames.push('active')\n    return <Button className={classNames.join(' ')} onClick={this._onClick}>{text}</Button>\n  }\n}\n\nconst mapStateToProps = (state, ownProps) => {\n  const { departArrive, date, time, startTime, endTime } = state.otp.currentQuery\n  return {\n    config: state.otp.config,\n    departArrive,\n    date,\n    time,\n    startTime,\n    endTime,\n    timeFormat: getTimeFormat(state.otp.config),\n    dateFormat: getDateFormat(state.otp.config)\n  }\n}\n\nconst mapDispatchToProps = {\n  setQueryParam\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(DateTimeSelector)\n"]}